clear_files: false
new_index: false
output_folder: "../../../../benchmark/benchmark_v4/p3_conservation/conservation_analysis"
database_filekey: "../../../../benchmark/benchmark_v4/p2_orthogroups/orthogroups/database_key.json"
table_file: "../../../../benchmark/benchmark_v4/p1_table/benchmark_table.csv"
steps_to_run:
  - "s1" # setup folderes
  - "s2" # define_idrs
  - "s3" # find_hit
  - "s4" # add_lvlinfo
  - "s5" # scores
  # - "s6" # multilevel_plots
  # - "s7" # output_aln_slice
  - "s8" # calculate_annotations
  - "s9" # add_annotations2table
hit_sequence_params:
  hit_sequence_search_method: "given_positions"
idr_params:
  find_idrs: true
  # idr_map_file: "./idr_map.json"
  iupred_cutoff: 0.4
  gap_merge_threshold: 10
  idr_min_length: 8
filter_params:
  min_num_orthos: 20

msa_score_methods:
  aln_property_entropy:
    function_name: "aln_property_entropy"
    function_params:
      gap_frac_cutoff: 0.2
      overwrite: false
  aln_shannon_entropy:
    function_name: "aln_shannon_entropy"
    function_params:
      gap_frac_cutoff: 0.2
      overwrite: false

pairk_aln_methods:
    # level: "Vertebrata"
  # pairk_aln_lf5_rf5_blosum62:
  #   function_name: "pairk_aln"
  #   function_params:
  #     overwrite: false
  #     matrix_name: "BLOSUM62"
  #   lflank: 5
  #   rflank: 5
  #   level: "Vertebrata"
  pairk_aln_lf0_rf0_blosum62:
    function_name: "pairk_aln"
    function_params:
      overwrite: false
      matrix_name: "BLOSUM62"
    lflank: 0
    rflank: 0
    level: "Vertebrata"
  pairk_aln_lf0_rf0_grantham:
    function_name: "pairk_aln"
    function_params:
      overwrite: false
      matrix_name: "grantham_similarity_norm"
    lflank: 0
    rflank: 0
    level: "Vertebrata"
  pairk_aln_lf0_rf0_edssmat50:
    function_name: "pairk_aln"
    function_params:
      overwrite: false
      matrix_name: "EDSSMat50"
    lflank: 0
    rflank: 0
    # level: "Vertebrata"
  pairk_aln_needleman_lf0_rf0_edssmat50:
    function_name: "pairk_aln_needleman"
    function_params:
      overwrite: false
      matrix_name: "EDSSMat50"
    lflank: 0
    rflank: 0
    level: "Vertebrata"
  pairk_aln_lf2_rf2_edssmat50:
    function_name: "pairk_aln"
    function_params:
      overwrite: false
      matrix_name: "EDSSMat50"
    lflank: 2
    rflank: 2
    level: "Vertebrata"
  pairk_aln_lf5_rf5_edssmat50:
    function_name: "pairk_aln"
    function_params:
      overwrite: false
      matrix_name: "EDSSMat50"
    lflank: 5
    rflank: 5
  pairk_aln_lf10_rf10_edssmat50:
    function_name: "pairk_aln"
    function_params:
      overwrite: false
      matrix_name: "EDSSMat50"
    lflank: 10
    rflank: 10
    level: "Vertebrata"

pairk_embedding_aln_methods:
  # pairk_aln_embedding_lf5_rf5:
  #   function_name: "pairk_aln_embedding"
  #   function_params:
  #     overwrite: false
  #     embedding_file_path: "/mnt/shared/jch/embeddings_tmp/"
  #   lflank: 5
  #   rflank: 5
    # level: "Vertebrata"
  pairk_aln_embedding_lf0_rf0:
    function_name: "pairk_aln_embedding"
    function_params:
      overwrite: false
      embedding_file_path: "/mnt/shared/jch/embeddings_tmp/"
    lflank: 0
    rflank: 0
  pairk_aln_dr_bert_embedding_lf0_rf0:
    function_name: "pairk_aln_embedding"
    function_params:
      overwrite: false
      embedding_file_path: "/mnt/shared2/jch/dr_bert_embeddings_tmp/"
    lflank: 0
    rflank: 0

pairk_conservation_params:
  kmer_conservation_function_name: "pairk_conservation"
  columnwise_score_function_name: "property_entropy"
  bg_cutoff: 50
  bg_kmer_cutoff: 10

esm_params:
  processes: 28
  # threads: 10
  device: "cuda"

multilevel_plot_params:
  score_key: null
  score_type: "z_score"
aln_slice_params:
  n_flanking_aas: 20
  # whole_idr: true
table_annotation_params:
  score_key_for_table: null
  # motif_regex: "P.P.E"
  levels:
    # - "Eukaryota"
    # - "Metazoa"
    - "Vertebrata"
    # - "Tetrapoda"
    # - "Mammalia"
  annotations:
    - "json_file"
    # - "multi_level_plot"
    # - "hit_start_position"
    # - "regex"
    # - "regex_match"
    # - "regex_match_stpos_in_hit"
    # - "conservation_string"
    # - "aln_slice_file"
    # - "hit_scores"
    # - "hit_mean_score"
    # - "hit_z_scores"
    # - "hit_mean_zscore"
    # - "best mean z-score over 5 residue window"
    # - "best mean z-score over 10 residue window"
clean_analysis_files: false
